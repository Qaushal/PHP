
<div class='alert alert-warning alert-dismissible fade show' role='alert'>
        <strong>Holy guacamole!</strong> You should check in on some of those fields below.
        <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
      </div>

      ////////////////

      <?php
//post method


$insert = false;
//connect to db
$servername = "localhost";
$username = "root";
$password="";
$database="dbkaushal";
$conn = mysqli_connect($servername,$username,$password,$database);
if(!$conn) die("CONNECTION FAILED : " . mysqli_connect_error());
//query to create db
if($_SERVER['REQUEST_METHOD']=='POST'){
$Title = $_POST['title'];
$Description = $_POST['desc'];
// if($Title=="" || $Description==""){
//   echo " <div class='alert alert-warning alert-dismissible fade show' role='alert'>
//   <strong>UnSucessfull !</strong>
//   <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
// </div>";
// }
// else {
$sql="INSERT INTO `crud` (`Srno`, `Title`, `Description`, `TimeStamp`) VALUES ('' , '$Title ', '$Description', current_timestamp());";
$result = mysqli_query($conn,$sql);
if($result) {
  $insert = true;
}
}

?>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.7/css/dataTables.dataTables.css" />
   
    
      <title>PROJECT - CRUD</title>
     
  </head>
  <body>
<!-- Edit modal -->
<!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#Edit">
  Edit
</button> -->

<!-- Edit Modal -->
<div class="modal fade" id="EditModel" tabindex="-1" role = "dialog" aria-labelledby="EditModelLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="EditModellabel">Edit Note</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
          <!-- <span aria-hidden="true">&times;</span> -->
        </button>
      </div>
      <div class="modal-body">
      <form action="/Kaushal/CRUD/index.php" method="POST">
        <div class="form-group">
          <label for="title" >NOTES TITLE</label>
          <input type="text" class="form-control" id="titleEdit" name="titleEdit">
        </div>
          <div class="form-group">
            <label for="desc" >NOTES DESCRIPTION</label>
            <textarea class="form-control" id="descEdit" rows="3" name="descEdit"></textarea>
          </div>
       
        <button type="submit" class="btn btn-primary">Add Note</button>
      </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>




    <nav class="navbar bg-dark navbar-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="./phpphoto.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
            PHP - CRUD
          </a>
        </div>
      </nav>
      <?php
      if($insert){
       echo " <div class='alert alert-success alert-dismissible fade show' role='alert'>
               <strong>Sucessfull !</strong> Your Note is inserted .
               <button type='button' class='btn-close' data-bs-dismiss='alert' aria-label='Close'></button>
             </div>";
      }
      ?>
        <div class="container my-4">
          <h2>ADD A NOTES</h2>
          <form action="/Kaushal/CRUD/index.php" method="POST">
        <div class="mb-3">
          <label for="title" class="title">NOTES TITLE</label>
          <input type="text" class="form-control" id="title" name="title">
         
          <div class="my-3">
            <label for="desc" class="desc">NOTES DESCRIPTION</label>
            <textarea class="form-control" id="desc" rows="3" name="desc"></textarea>
          </div>
       
        <button type="submit" class="btn btn-primary">Add Note</button>
      </form>
    </div>

    

    <table class="table" id="myTable">
  <thead>
    <tr>
      <th scope="col">Sr.No</th>
      <th scope="col">Title</th>
      <th scope="col">Description</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
<?php
$sql="SELECT * FROM crud";
$result=mysqli_query($conn,$sql);
$row=mysqli_num_rows($result);
$srno=0;
while($row=mysqli_fetch_assoc($result)){
  $srno+=1;
  echo "<tr>
  <td>" . $srno ."</th>
  <td>" . $row['Title'] ."</td>
  <td>" . $row['Description'] ."</td>
  <td> <button class='delete btn btn-sm btn-primary  data-bs-toggle='deletemodel'>Delete</button> <button class='edit btn btn-sm btn-primary  data-bs-toggle='model'>Edit</button> </td>
</tr>";
}
?>
  
    
  </tbody>
</table>



<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/2.0.7/js/dataTables.js"></script>
<script>
   let table = new DataTable('#myTable');
      </script>
       <script>
       let edits=document.getElementsByClassName('edit');
        Array.from(edits).forEach((element)=>{
          element.addEventListener("click",(e)=>{
            e.preventDefault();
           tr=e.target.parentNode.parentNode;
           title = tr.getElementsByTagName("td")[1].innerText;
           description = tr.getElementsByTagName("td")[2].innerText;
           console.log(title, description);
           titleEdit.value = title;
           descEdit.value=description;
           $('#EditModel').modal('toggle');
          })
        })
      </script>
  </body>
</html>